# Node.js
基于chrome's V8的JavaScript运行时环境
## 特性
没有浏览器安全级别的限制，提供系统级别的api,如：
+ 文件的读写
+ 进程的管理
+ 网络通信
# node 相关工具
## NVM:Node Version Manager
> LTS:long time support
``` javascript
$ nvm
```
## NPM:Node Package Manager
安装npm Node.js自带

一些命令
``` javascript
$ npm list //显示所有npm包，一个依赖树
$ npm list | grep <packageName>  //查看某个包的独立依赖（似乎没有第三方）
$ npm install --producion //只安装生产环境所需要的包
$ npm view <packageName> versions //查看某个包的所有版本
$ npm i jquery@1 -S //jquery@1.的最高版本
$ npm outdated //显示过期的包
$ npm update //更新版本,根据package.json
$ npm cache clean --force //删除缓存,安装出错时,可能是因为缓存
```
### node package versions
> 13.4.6:  major:13,minor:4,patch:6
1. major(主版本):大更新 
2. minor(副版本):大方向不变的情况下添加新功能 
3. patch：打补丁(一般偶数稳定，奇数不稳定)
#### 版本配置的符号解释
+ ^锁定主版本,但是所输入的版本也需要存在 "^2.1.0"
+ ~锁定主版本号和副版本号 "~2.1.0"
+ 锁定版本，如"2.1.0"
+ 最新版本，"*"
### modules类型
1. buildins 内置的包
2. thirdpaty 第三方的包
3. custom 自己的包
### npm切换源
``` javascript
$ npm config get registry //查看当前源
$ npm config set registry https://registry.your-registry.npme.io/ //设置npm源
```
### 发布包
``` javascript
$ npm publish //发布包命令
```
### [package.json信息的描述](https://docs.npmjs.com/cli/v7/configuring-npm/package-json)
### npm脚本
注意在windows环境下需要插件脚本才能够进行并行执行
如[npm-run-all](https://github.com/mysticatea/npm-run-all)
``` javascript
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1", //test，start之类的不需要npm run test 直接 npm test就好了
    "runjs": "node ./1.script/script1.js && node ./1.script/script2.js",
    "start": "node ./1.script/script1.js"
  },
```
#### 获取npm package.json文件内容
**值得注意的是，命令行的方式是无法获取的，需要使用script的脚本来获取**

js文件中访问
``` javascript
process.env.npm_package_version //获取package.json的版本号
process.env.npm_package_scripts //undefined，似乎无法直接获取对象
```
script脚本中访问
``` javascript
 "build": "echo %npm_package_version%"
```
### 定义环境变量
### npm可以安装github的包，作为依赖
``` javascript
$ npm install git+https://git.niubi.com/yourName/niubility.git
$ npm install git+ssh://git@github.com:WuuG/VueComponents.git
```
### cross-env
不同操作系统之间的ENV不是兼容的，因此需要cross-env
``` javascript
  "scripts": {
    //在mac，linux可以获取环境变量，但是在window中不行
    "prod": "NODE_ENV=production gulp",
    "dev": "NODE_ENV=development gulp"
  },
```
cross-env
``` javascript
$ npm i cross-env -D
```
此时的script
``` javascript
  "scripts": {
    "prod": "cross-env NODE_ENV=production gulp",
    "dev": "cross-env NODE_ENV=development gulp"
  },
```
## NRM：Npm Registry Managerment 
npm的镜像源管理工具 

安装
``` javascript
$ npm install -g nrm
```
一些基础命令
``` javascript
nrm ls //获取list
nrm use <registry name> //切换源
nrm test //测试速度
```
## NPX:npm package extension
npm5.2以后才支持